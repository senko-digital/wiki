---
title: "Почему Google показывает неверное местоположение вашего сервера"
description: "Как исправить проблему с неправильной геолокацией, когда Google отображает ваш сервер в неверной стране."
head:
  - - meta
    - name: keywords
      content: геолокация, виртуальный сервер, ip адрес, google карты, неверное местоположение, управление сервером
  - - meta
    - property: og:title
      content: "Почему Google показывает неверное местоположение вашего сервера"
  - - meta
    - property: og:description
      content: "Как исправить проблему с неправильной геолокацией, когда Google отображает ваш сервер в неверной стране."
---

# Неверная геолокация в сервисах Google

Некоторые наши клиенты сообщают, что Google неправильно определяет IP-адрес их виртуального сервера, отображая локацию в совершенно другой стране, отличающейся от фактического местоположения сервера. Объясняем причины данной проблемы и как это монжо исправить.

## Как диагностировать эту проблему

Чтобы проверить, сталкиваетесь ли вы с этой проблемой:

1. Откройте домашнюю страницу Google в режиме инкогнито вашего браузера (нужно быть подключеным к VPN расположенном на вашем сервере)
2. Посмотрите на страну, отображаемую внизу страницы

Если вы видите "Germany" или "Deutschland" - Google правильно определяет местоположение вашего сервера.

Если вы видите другую страну, Google переопределил наши официально зарегистрированные данные о местоположении своей неточной информацией.

В некоторых случаях отключение IPv6 на вашем сервере может решить проблему.

Для временного отключения IPv6 на сервере, нужно ввести следующие команды:

```Bash
sysctl -w net.ipv6.conf.all.disable_ipv6=1
sysctl -w net.ipv6.conf.default.disable_ipv6=1
```

Для включения IPv6 используйте команды:

```Bash
sysctl -w net.ipv6.conf.all.disable_ipv6=0
sysctl -w net.ipv6.conf.default.disable_ipv6=0
sysctl -p
```

## Почему это происходит

Системы Google используют сразу несколько источников данных для определения местоположения IP адреса:

1. **Официальные данные реестра IP** - данные которое мы внесли в реестр RIPE
2. **Модели поведения пользователей** - откуда обычно подключаются пользователи этого IP
3. **Сигналы о местоположении устройств** - данные о местоположении с устройств, использующих этот IP адрес

Когда эти источники противоречат друг-другу, Google часто переопределяет официальное местоположение тем, что их алгоритмы считают более точным, даже когда эта локация может быть неточной.

К сожалению эта проблема находится вне нашего контроля, поскольку только Google управляет своей базой данных с геолокацией.

## Как проверить фактическое местоположение вашего сервера

Вы можете узнать точную локацию вашего сервера с помощью этих инструментов:

- [Check Host](https://check-host.net) - показывает местоположение сразу из нескольких геобаз данных
- [IPinfo.io](https://ipinfo.io) - предоставляет подробные данные о геолокации IP адреса
- [MaxMind](https://www.maxmind.com/en/geoip-demo) - самый часто используемый источник информации об IP адресах
- [RIPE Database](https://apps.db.ripe.net/db-web-ui/query?bflag=false&dflag=false&rflag=true&searchtext=&source=RIPE) - официальный реестр, где мы в первую очередь и вносим информацию о наших IP адресах

RIPE является наиболее важным источником, так как именно там мы предоставляем первоначальную информацию о наших подсетях.

## Сообщите о проблеме в Google

Вы можете помочь, сообщив о неправильной геолокации IP в Google:

1. Посетите [форму обратной связи Google](https://support.google.com/websearch/workflow/9308722?hl=en)
2. Выберите фактическую страну вашего сервера (Германия) из выпадающего списка
3. Введите IP-адрес вашего сервера в соответствующее поле
4. Отправьте форму

Обратите внимание, что Google полностью контролирует свою базу данных, и не может внести предложенные вами изменения сразу же. 

В некоторых случаях они могут отклонить ваш запрос, если их алгоритмы посчитают что сервер расположен в другой локации.

## Наши варианты решения

В некоторых случаях мы можем предложить бесплатную одноразовую замену IP адреса на вашем сервере. Хотя это и временное решение, и не решает проблему в полном объёме, оно всё ещё может временно исправить ситуацию.

Мы уже связывались с Google по поводу этой проблемы и ожидаем ответа. Однако, поскольку это в конечном итоге полностью контролируется системами Google, мы не можем гарантировать полное решение этой проблемы.
